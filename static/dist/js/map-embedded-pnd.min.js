const projectDataGeoJsonUrl=WEBAPP_BASEPATH+"test/pnd-markers.geojson",markerClasses=[{id:"reservation",text:"Reservation Capital Project",color:"blue"},{id:"trail",text:"Trail Project",color:"brown"},{id:"restoration",text:"Ecological Restoration and Site Improvements",color:"green"},{id:"golf",text:"Golf Capital Project",color:"black"},{id:"expansion",text:"New Reservations/Major Park Expansions",color:"red"},{id:"zoo",text:"Zoo Capital Project",color:"purple"}];$(document).ready((function(){initMap({base:"map",scrollZoom:!1,trackUserLocation:!1})})),$(document).on("mapInitialized",(function(){MAP.on("load",()=>{const e=document.getElementById("map_legend");markerClasses.forEach((o,t,r)=>{const a="source-"+o.id,c="layer-"+o.id,l="layer-cluster-"+o.id,n="layer-cluster-count-"+o.id;MAP.addSource(a,{type:"geojson",data:projectDataGeoJsonUrl,filter:["==",["get","Map Class"],o.text],cluster:!0,clusterMinPoints:2,clusterMaxZoom:9}),MAP.addLayer({id:c,type:"circle",source:a,filter:["!has","point_count"],paint:{"circle-radius":8,"circle-color":o.color,"circle-stroke-width":1,"circle-stroke-color":"white"}}),MAP.addLayer({id:l,type:"circle",source:a,filter:["has","point_count"],paint:{"circle-color":o.color,"circle-radius":["step",["get","point_count"],12,2,16,4,20],"circle-stroke-width":1,"circle-stroke-color":"white"}}),MAP.addLayer({id:n,type:"symbol",source:a,filter:["has","point_count"],layout:{"text-field":"{point_count}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":16},paint:{"text-color":"white"}}),MAP.on("mousemove",c,e=>{MAP.getCanvas().style.cursor="pointer"}),MAP.on("mouseleave",c,()=>{MAP.getCanvas().style.cursor=""}),MAP.on("click",c,e=>{const o=e.features[0].geometry.coordinates.slice(),t='<h2 class="project-name">'+e.features[0].properties.Project+'</h2><p class="project-type">'+e.features[0].properties["Project Type"]+'</p><p class="project-link"><a class="project-link"><a href="'+e.features[0].properties["Project Page Link"]+'">More info</a></p>';for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;(new mapboxgl.Popup).setLngLat(o).setHTML(t).addTo(MAP)});const s=o.color,i=document.createElement("div"),p=document.createElement("span");p.className="legend_key",p.style.backgroundColor=s;const d=document.createElement("span");d.innerHTML=""+o.text,i.appendChild(p),i.appendChild(d),e.appendChild(i)})})}));