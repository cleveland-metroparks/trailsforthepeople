const projectDataGeoJsonUrl=WEBAPP_BASEPATH+"test/pnd-markers.geojson",markerClasses=[{id:"reservation",text:"Reservation Capital Project",color:"blue"},{id:"trail",text:"Trail Project",color:"brown"},{id:"restoration",text:"Ecological Restoration and Site Improvements",color:"green"},{id:"golf",text:"Golf Capital Project",color:"black"},{id:"expansion",text:"New Reservations/Major Park Expansions",color:"red"},{id:"zoo",text:"Zoo Capital Project",color:"purple"}];$(document).ready((function(){initMap({base:"map",scrollZoom:!1,trackUserLocation:!1})})),$(document).on("mapInitialized",(function(){MAP.on("load",()=>{markerClasses.forEach((e,o,t)=>{const r="source-"+e.id,a="layer-"+e.id,c="layer-cluster-"+e.id,s="layer-cluster-count-"+e.id;MAP.addSource(r,{type:"geojson",data:projectDataGeoJsonUrl,filter:["==",["get","Map Class"],e.text],cluster:!0,clusterMinPoints:2,clusterMaxZoom:9}),MAP.addLayer({id:a,type:"circle",source:r,filter:["!has","point_count"],paint:{"circle-radius":8,"circle-stroke-width":1,"circle-color":e.color,"circle-stroke-color":"white"}}),MAP.addLayer({id:c,type:"circle",source:r,filter:["has","point_count"],paint:{"circle-color":e.color,"circle-radius":["step",["get","point_count"],12,2,16,4,20]}}),MAP.addLayer({id:s,type:"symbol",source:r,filter:["has","point_count"],layout:{"text-field":"{point_count}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":16},paint:{"text-color":"white"}}),MAP.on("mousemove",a,e=>{MAP.getCanvas().style.cursor="pointer"}),MAP.on("mouseleave",a,()=>{MAP.getCanvas().style.cursor=""}),MAP.on("click",a,e=>{const o=e.features[0].geometry.coordinates.slice(),t='<h2 class="project-name">'+e.features[0].properties.Project+'</h2><p class="project-type">'+e.features[0].properties["Project Type"]+'</p><p class="project-link"><a class="project-link"><a href="'+e.features[0].properties["Project Page Link"]+'">More info</a></p>';for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;(new mapboxgl.Popup).setLngLat(o).setHTML(t).addTo(MAP)})})})}));