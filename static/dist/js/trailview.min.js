let trailviewToggled=!1,trailviewViewer=null;function initTrailView(){const e=document.querySelector("#trailviewIcon");if(null===e)throw new Error("trailviewIcon id not found");e.addEventListener("click",()=>{toggleTrailView()})}function toggleTrailView(){if(!1===trailviewToggled){if(addTrailViewMapLayer(),$("#trailviewViewer").fadeIn(),null===trailviewViewer){const e=trailviewer.defaultBaseOptions;e.target="trailviewViewer",trailviewViewer=new trailviewer.TrailViewerBase(e)}trailviewToggled=!0}else removeTrailViewMapLayer(),$("#trailviewViewer").fadeOut(),trailviewViewer.destroy(),trailviewViewer=null,trailviewToggled=!1}function removeTrailViewMapLayer(){MAP.getSource("dots")&&(MAP.removeLayer("dots"),MAP.removeSource("dots"))}function addTrailViewMapLayer(){if(null===MAP)return;removeTrailViewMapLayer();MAP.addSource("dots",{type:"vector",format:"pbf",tiles:["https://trailview.cmparks.net/api/tiles/{z}/{x}/{y}/standard"]}),MAP.addLayer({id:"dots","source-layer":"geojsonLayer",source:"dots",type:"circle",paint:{"circle-radius":10,"circle-color":["case",["==",["get","visible"],!0],"#00a108","#db8904"]}}),MAP.setPaintProperty("dots","circle-radius",["interpolate",["exponential",.5],["zoom"],13,3,16,5,17,7,20,8]),MAP.setPaintProperty("dots","circle-opacity",["interpolate",["exponential",.5],["zoom"],13,.05,15,.1,17,.25,20,1])}