function callGetBeachClosures(a){return $.ajax({url:APP_BASEPATH+"ajax/get_beach_closures",dataType:"json",data:a}).done(function(a){displayBeachClosures(a.results)}).fail(function(a,b,c){console.log("callGetBeachClosures "+b+": "+c)})}function displayBeachClosures(a){for(var b=0;b<a.length;b++){var c=a[b];marker=new L.marker([c.lat,c.lng],{clickable:!0,draggable:!1,icon:L.mapbox.marker.icon({"marker-color":c.status_color})}).bindPopup(beachPopupMarkup(c)),markerLayer.addLayer(marker)}markerLayer.addTo(MAP)}function beachPopupMarkup(a){return markup="<h3>"+a.name+"</h3>",a.status_text&&(markup+="<p>Status: <strong>"+a.status_text+"</strong></p>"),a.date_updated&&(markup+="<p>Updated "+a.date_updated+"</p>"),markup}var markerLayer=L.featureGroup();$(document).ready(function(){var a={base:"map"};initMap(a),MAP.scrollWheelZoom.disable(),callGetBeachClosures()});