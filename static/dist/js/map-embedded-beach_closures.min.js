var markerLayer=L.featureGroup();function callGetBeachClosures(a){return $.ajax({url:API_BASEPATH+"ajax/get_beach_closures",dataType:"json",data:a}).done(function(a){displayBeachClosures(a.results)}).fail(function(a,e,r){console.log("callGetBeachClosures "+e+": "+r)})}function displayBeachClosures(a){for(var e=0;e<a.length;e++){var r=a[e];marker=new L.marker([r.lat,r.lng],{clickable:!0,draggable:!1,icon:L.mapbox.marker.icon({"marker-color":r.status_color})}).bindPopup(beachPopupMarkup(r)),markerLayer.addLayer(marker)}markerLayer.addTo(MAP)}function beachPopupMarkup(a){return markup="<h3>"+a.name+"</h3>",a.status_text&&(markup+="<p>Status: <strong>"+a.status_text+"</strong></p>"),a.external_link&&(markup+="<p>Water Quality: "+a.external_link+"</p>"),a.date_updated&&(markup+='<p style="font-size: 90% !important">Updated '+a.date_updated+"</p>"),markup}$(document).ready(function(){initMap({base:"map"}),MAP.scrollZoom.disable(),callGetBeachClosures()});