function callGetBeachClosures(t){$.get(API_NEW_BASE_URL+"beach_closures",null,(function(t){displayBeachClosures(t.data)}),"json")}function displayBeachClosures(t){var e=[];t.forEach((function(t){e.push(turf.point([t.longitude,t.latitude],{status_color:t.status_color,name:t.title,date_updated:t.date_updated,external_link:t.external_link,status_color:t.status_color,status_text:t.beachstatus}))})),MAP.addLayer({id:"beach_closures",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:{"circle-radius":10,"circle-color":["concat","#",["get","status_color"]]}}),MAP.on("click","beach_closures",(function(t){for(var e=t.features[0].geometry.coordinates.slice(),a=beachPopupMarkup(t.features[0].properties);Math.abs(t.lngLat.lng-e[0])>180;)e[0]+=t.lngLat.lng>e[0]?360:-360;(new mapboxgl.Popup).setLngLat(e).setHTML(a).addTo(MAP)})),MAP.on("mouseenter","beach_closures",(function(){MAP.getCanvas().style.cursor="pointer"})),MAP.on("mouseleave","beach_closures",(function(){MAP.getCanvas().style.cursor=""}))}function beachPopupMarkup(t){return markup="<h3>"+t.name+"</h3>",t.status_text&&(markup+="<p>Status: <strong>"+t.status_text+"</strong></p>"),t.external_link&&(markup+="<p>Water Quality: "+t.external_link+"</p>"),t.date_updated&&(markup+='<p style="font-size: 90% !important">Updated '+t.date_updated+"</p>"),markup}$(document).ready((function(){var t={base:DEFAULT_LAYER,scrollZoom:!1,trackUserLocation:!1};initMap(t),callGetBeachClosures()}));